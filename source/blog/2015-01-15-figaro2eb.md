---
title:  "New Project - figaro2eb"
date:   2015-01-15 14:45:00
tags:   project
---

> [figaro2eb](https://github.com/andrewjkerr/figaro2eb) - Generates a shell script from Figaro&#39;s application.yml to set environment variables on an Elastic Beanstalk instance.

This gem kind of spawned from the need to migrate from Heroku to AWS. Since Figaro provides a nice rake task to get your environment variables up to Heroku, we had been using that to manage our sensitive material for our Rails app. However, getting Figaro to play nicely with AWS would be a little bit difficult and manually entering the keys would take a lot of time.

Enter figaro2eb. What this nifty gem does is take the application.yml file that's used by Figaro and generates a shell script that uses the `eb setvar` command to set the environment variables.

Using it is as easy as:

1. `gem install figaro2eb`
2. `cd /path/to/rails/root`
3. `figaro2eb target_rails_env target_eb_env`

I've found this to be a huge help to set up new AWS EB instances and hopefully it will be of use for you too!

And, as an added bonus, here's a script I through together to run commands inside the Docker container with all of your environment variables:

```ruby
#!/bin/env ruby
 
require 'json'

env_vars = JSON.parse(`/opt/elasticbeanstalk/bin/get-config environment`)

str = 'docker run -i '
env_vars.each do |key, value|
  str << "-e #{key}=#{value} "
end

str << "aws_beanstalk/current-app #{ARGV[0]}"
 
exec str
```

Neat, huh!?